language: c

os:
  - linux
  - osx

env:
  matrix:
    - DISTRO=ubuntu TAG=20.04
    - DISTRO=fedora TAG=32

# https://docs.travis-ci.com/user/reference/osx/#macos-version
osx_image:
  - xcode10.3
  - xcode11.3

script:
  - date
  - uname -a
  - echo $DISTRO $TAG
  - if [ $(uname) == "Darwin" ] ; then
    uname -a
    cd scripts && {
    sh 00_mac.sh
    sh 05_python.sh
    }
    fi
  - if [ $(uname) == "Linux" ] ; then
    uname -a
    cd tests && docker build -f Dockerfile_${DISTRO}
    fi

jobs:
  exclude:
    # For each osx_image but one there should be an entry in the exclude
    # list, to prevent duplicate Linux builds.
    - os: osx
      ENV: DISTRO=ubuntu TAG=20.04
